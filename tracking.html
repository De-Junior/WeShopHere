<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Track Order - WeShopOnline</title>

  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">

  <style>
    /* Reset & Base */
    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
      font-family: 'Inter', sans-serif;
    }

    body {
      background: #f4f6f8;
      color: #1f2937;
      line-height: 1.5;
    }

    a {
      text-decoration: none;
      color: inherit;
    }

    button {
      font-family: inherit;
      cursor: pointer;
      transition: all 0.2s ease;
    }

    button:hover {
      opacity: 0.9;
      transform: translateY(-1px);
    }

    .container {
      max-width: 1200px;
      margin: 0 auto;
      padding: 0 16px;
    }

    /* Header */
    header {
      background: #1f2937;
      color: #fff;
    }

    .top-bar {
      display: flex;
      flex-wrap: wrap;
      gap: 16px;
      padding: 14px 24px;
      align-items: center;
    }

    .logo a {
      font-size: 28px;
      font-weight: 700;
      color: #38bdf8;
    }

    .search {
      flex: 1;
      min-width: 200px;
    }

    .search input {
      width: 100%;
      padding: 10px 14px;
      border-radius: 8px;
      border: none;
      font-size: 14px;
    }

    .address {
      color: #9ca3af;
      font-size: 14px;
    }

    .account {
      display: flex;
      gap: 8px;
      align-items: center;
    }

    .account span, .account a {
      color: #fff;
      font-size: 14px;
    }

    .account a:hover {
      text-decoration: underline;
    }

    /* Navigation */
    nav {
      background: #fff;
      padding: 14px 24px;
      display: flex;
      flex-wrap: wrap;
      justify-content: space-between;
      border-bottom: 1px solid #e5e7eb;
    }

    .nav-left,
    .nav-right {
      display: flex;
      flex-wrap: wrap;
      gap: 12px;
      align-items: center;
    }

    .badge {
      background: #dcfce7;
      color: #15803d;
      padding: 4px 10px;
      border-radius: 999px;
      font-size: 13px;
      font-weight: 600;
    }

    .nav-action {
      display: flex;
      align-items: center;
      gap: 6px;
      background: #f1f5f9;
      color: #1f2937;
      border: none;
      padding: 6px 12px;
      border-radius: 999px;
      font-weight: 600;
      font-size: 14px;
    }

    .nav-action:hover {
      background: #e2e8f0;
    }

    .nav-action .count {
      background: #2563eb;
      color: white;
      font-size: 12px;
      padding: 2px 7px;
      border-radius: 999px;
      min-width: 20px;
      text-align: center;
    }

    .wishlist-btn .count {
      background: #f43f5e;
    }

    /* Page Header */
    .page-header {
      padding: 40px 0 20px;
    }

    .page-header h1 {
      font-size: 32px;
      font-weight: 700;
      margin-bottom: 8px;
    }

    .page-header p {
      color: #6b7280;
      font-size: 16px;
    }

    /* Tracking Container */
    .tracking-container {
      display: grid;
      grid-template-columns: 1fr 400px;
      gap: 30px;
      margin-bottom: 60px;
    }

    @media (max-width: 1024px) {
      .tracking-container {
        grid-template-columns: 1fr;
      }
    }

    /* Order Lookup */
    .order-lookup {
      background: #fff;
      border-radius: 12px;
      padding: 30px;
      margin-bottom: 30px;
      box-shadow: 0 1px 3px rgba(0,0,0,0.1);
    }

    .lookup-title {
      font-size: 20px;
      font-weight: 700;
      margin-bottom: 20px;
      color: #1f2937;
    }

    .lookup-form {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 20px;
    }

    @media (max-width: 768px) {
      .lookup-form {
        grid-template-columns: 1fr;
      }
    }

    .form-group {
      margin-bottom: 20px;
    }

    .form-group.full-width {
      grid-column: 1 / -1;
    }

    .form-group label {
      display: block;
      font-size: 14px;
      font-weight: 600;
      margin-bottom: 8px;
      color: #374151;
    }

    .form-group input {
      width: 100%;
      padding: 12px 16px;
      border: 1px solid #d1d5db;
      border-radius: 8px;
      font-size: 14px;
      transition: border-color 0.2s ease;
    }

    .form-group input:focus {
      outline: none;
      border-color: #2563eb;
      box-shadow: 0 0 0 3px rgba(37, 99, 235, 0.1);
    }

    .lookup-btn {
      background: #2563eb;
      color: white;
      border: none;
      padding: 14px 28px;
      border-radius: 8px;
      font-weight: 600;
      font-size: 16px;
      width: 100%;
      margin-top: 10px;
    }

    .lookup-btn:hover {
      background: #1d4ed8;
    }

    /* Active Tracking */
    .active-tracking {
      background: #fff;
      border-radius: 12px;
      padding: 30px;
      box-shadow: 0 1px 3px rgba(0,0,0,0.1);
    }

    .tracking-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 24px;
      padding-bottom: 20px;
      border-bottom: 1px solid #e5e7eb;
    }

    .tracking-title {
      font-size: 20px;
      font-weight: 700;
      color: #1f2937;
    }

    .order-status {
      display: inline-flex;
      align-items: center;
      gap: 6px;
      background: #dcfce7;
      color: #15803d;
      padding: 8px 16px;
      border-radius: 999px;
      font-size: 14px;
      font-weight: 600;
    }

    /* Tracking Timeline */
    .tracking-timeline {
      position: relative;
      padding-left: 40px;
      margin: 30px 0;
    }

    .tracking-timeline:before {
      content: '';
      position: absolute;
      left: 15px;
      top: 0;
      bottom: 0;
      width: 2px;
      background: #e5e7eb;
    }

    .timeline-step {
      position: relative;
      margin-bottom: 40px;
    }

    .timeline-step:last-child {
      margin-bottom: 0;
    }

    .timeline-step.completed:before {
      background: #10b981;
      border-color: #10b981;
    }

    .timeline-step.current:before {
      background: #2563eb;
      border-color: #2563eb;
      animation: pulse 2s infinite;
    }

    @keyframes pulse {
      0% { box-shadow: 0 0 0 0 rgba(37, 99, 235, 0.4); }
      70% { box-shadow: 0 0 0 10px rgba(37, 99, 235, 0); }
      100% { box-shadow: 0 0 0 0 rgba(37, 99, 235, 0); }
    }

    .timeline-step:before {
      content: '';
      position: absolute;
      left: -33px;
      top: 4px;
      width: 24px;
      height: 24px;
      border-radius: 50%;
      background: #e5e7eb;
      border: 3px solid #fff;
      z-index: 2;
    }

    .timeline-step.completed:after {
      content: '‚úì';
      position: absolute;
      left: -29px;
      top: 4px;
      color: #fff;
      font-size: 12px;
      font-weight: bold;
      z-index: 3;
    }

    .timeline-content {
      padding-bottom: 20px;
    }

    .timeline-title {
      font-size: 16px;
      font-weight: 600;
      color: #1f2937;
      margin-bottom: 6px;
    }

    .timeline-time {
      font-size: 14px;
      color: #6b7280;
      margin-bottom: 8px;
    }

    .timeline-description {
      font-size: 14px;
      color: #4b5563;
      margin-bottom: 12px;
    }

    .timeline-location {
      display: flex;
      align-items: center;
      gap: 6px;
      font-size: 13px;
      color: #6b7280;
    }

    /* Delivery Info */
    .delivery-info {
      background: #f9fafb;
      border-radius: 8px;
      padding: 20px;
      margin-top: 30px;
    }

    .info-row {
      display: flex;
      justify-content: space-between;
      margin-bottom: 12px;
      font-size: 14px;
    }

    .info-row:last-child {
      margin-bottom: 0;
    }

    .info-label {
      color: #6b7280;
      font-weight: 500;
    }

    .info-value {
      color: #1f2937;
      font-weight: 600;
    }

    /* Delivery Map */
    .delivery-map {
      background: #e5e7eb;
      border-radius: 8px;
      height: 200px;
      margin-top: 20px;
      display: flex;
      align-items: center;
      justify-content: center;
      color: #6b7280;
      font-weight: 600;
    }

    /* Tracking Actions */
    .tracking-actions {
      display: flex;
      gap: 12px;
      margin-top: 24px;
    }

    .action-btn {
      flex: 1;
      padding: 12px;
      border-radius: 8px;
      border: 1px solid #d1d5db;
      background: #fff;
      font-weight: 600;
      color: #1f2937;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 8px;
    }

    .action-btn:hover {
      background: #f9fafb;
      border-color: #2563eb;
      color: #2563eb;
    }

    /* Recent Orders */
    .recent-orders {
      background: #fff;
      border-radius: 12px;
      padding: 30px;
      box-shadow: 0 1px 3px rgba(0,0,0,0.1);
    }

    .recent-title {
      font-size: 20px;
      font-weight: 700;
      margin-bottom: 24px;
      color: #1f2937;
    }

    .orders-list {
      max-height: 400px;
      overflow-y: auto;
    }

    .order-card {
      display: flex;
      align-items: center;
      gap: 16px;
      padding: 20px;
      border-bottom: 1px solid #e5e7eb;
      cursor: pointer;
      transition: background 0.2s ease;
    }

    .order-card:hover {
      background: #f9fafb;
    }

    .order-card:last-child {
      border-bottom: none;
    }

    .order-icon {
      width: 40px;
      height: 40px;
      background: #eff6ff;
      border-radius: 8px;
      display: flex;
      align-items: center;
      justify-content: center;
      color: #2563eb;
      font-size: 18px;
    }

    .order-details {
      flex: 1;
    }

    .order-number {
      font-size: 14px;
      font-weight: 600;
      color: #1f2937;
      margin-bottom: 4px;
    }

    .order-date {
      font-size: 13px;
      color: #6b7280;
      margin-bottom: 4px;
    }

    .order-status-small {
      display: inline-block;
      padding: 2px 8px;
      border-radius: 999px;
      font-size: 11px;
      font-weight: 600;
      margin-top: 4px;
    }

    .status-delivered {
      background: #dcfce7;
      color: #15803d;
    }

    .status-shipping {
      background: #dbeafe;
      color: #1d4ed8;
    }

    .status-processing {
      background: #fef3c7;
      color: #92400e;
    }

    /* Footer */
    footer {
      background: #1f2937;
      color: #cbd5f5;
      margin-top: 60px;
    }

    .footer-content {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
      gap: 20px;
      padding: 30px 16px;
      max-width: 1200px;
      margin: auto;
    }

    .footer-content h4 {
      color: #fff;
      margin-bottom: 12px;
      font-size: 16px;
    }

    .footer-link {
      display: block;
      color: #cbd5f5;
      font-size: 14px;
      margin-bottom: 8px;
    }

    .footer-link:hover {
      color: #fff;
      text-decoration: underline;
    }

    .copyright {
      border-top: 1px solid #334155;
      padding: 20px;
      text-align: center;
      font-size: 13px;
      color: #9ca3af;
    }

    /* Notification */
    .notification {
      position: fixed;
      top: 20px;
      right: 20px;
      background: #10b981;
      color: white;
      padding: 12px 24px;
      border-radius: 8px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.15);
      z-index: 1000;
      animation: slideIn 0.3s ease;
    }

    @keyframes slideIn {
      from { transform: translateX(100%); opacity: 0; }
      to { transform: translateX(0); opacity: 1; }
    }

    @keyframes slideOut {
      from { transform: translateX(0); opacity: 1; }
      to { transform: translateX(100%); opacity: 0; }
    }

    /* Empty State */
    .empty-state {
      text-align: center;
      padding: 40px 20px;
    }

    .empty-icon {
      font-size: 64px;
      color: #9ca3af;
      margin-bottom: 20px;
    }

    .empty-title {
      font-size: 20px;
      font-weight: 600;
      color: #6b7280;
      margin-bottom: 12px;
    }

    .empty-description {
      color: #9ca3af;
      margin-bottom: 24px;
    }
  </style>
</head>

<body>

<header>
  <div class="top-bar">
    <div class="logo"><a href="index.html">WeShopOnline</a></div>
    <div class="address">Track your order status in real-time</div>
    <div class="search">
      <input type="text" placeholder="Search for products">
    </div>
    <div class="account">
      <span id="cartCount">R100 Credit</span>
      <span>|</span>
      <a href="#">Sign In</a>
      <span>/</span>
      <a href="#">Sign Up</a>
    </div>
  </div>
</header>

<nav>
  <div class="nav-left">
    <div class="badge">REAL-TIME TRACKING</div>
    <div class="badge">LIVE UPDATES</div>
  </div>

  <div class="nav-right">
    <button class="nav-action" onclick="window.location.href='index.html'">
      üè™ <span>Shop</span>
    </button>
    <button class="nav-action wishlist-btn" onclick="window.location.href='index.html'">
      ‚ù§Ô∏è <span>Wishlist</span>
      <span class="count" id="wishlistCount">0</span>
    </button>
    <button class="nav-action cart-btn" onclick="window.location.href='cart.html'">
      üõí <span>Cart</span>
      <span class="count" id="cartItems">0</span>
    </button>
  </div>
</nav>

<main class="container">
  <div class="page-header">
    <h1>Track Your Order</h1>
    <p>Enter your order details to check real-time delivery status</p>
  </div>

  <div class="tracking-container">
    <!-- Tracking Section -->
    <div>
      <!-- Order Lookup -->
      <div class="order-lookup">
        <h2 class="lookup-title">Track Your Order</h2>
        <form id="trackingForm" class="lookup-form" onsubmit="trackOrder(event)">
          <div class="form-group">
            <label for="orderNumber">Order Number *</label>
            <input type="text" id="orderNumber" placeholder="e.g., ORD-123456" required>
          </div>
          <div class="form-group">
            <label for="email">Email Address *</label>
            <input type="email" id="email" placeholder="your@email.com" required>
          </div>
          <div class="form-group full-width">
            <button type="submit" class="lookup-btn">Track Order</button>
          </div>
        </form>
        <p style="font-size: 14px; color: #6b7280; margin-top: 16px;">
          Can't find your order? <a href="#" style="color: #2563eb; font-weight: 600;">Contact Support</a>
        </p>
      </div>

      <!-- Active Tracking -->
      <div class="active-tracking" id="activeTracking" style="display: none;">
        <div class="tracking-header">
          <h2 class="tracking-title">Order Tracking</h2>
          <span class="order-status">üöö Out for Delivery</span>
        </div>

        <div class="tracking-info">
          <div class="info-row">
            <span class="info-label">Order Number:</span>
            <span class="info-value" id="trackingOrderNumber">ORD-123456</span>
          </div>
          <div class="info-row">
            <span class="info-label">Estimated Delivery:</span>
            <span class="info-value" id="trackingDelivery">Today, 2:00 PM - 4:00 PM</span>
          </div>
          <div class="info-row">
            <span class="info-label">Last Updated:</span>
            <span class="info-value" id="trackingUpdated">Just now</span>
          </div>
        </div>

        <!-- Tracking Timeline -->
        <div class="tracking-timeline">
          <div class="timeline-step completed">
            <div class="timeline-content">
              <div class="timeline-title">Order Confirmed</div>
              <div class="timeline-time">Dec 15, 10:30 AM</div>
              <div class="timeline-description">Your order has been received and confirmed</div>
            </div>
          </div>

          <div class="timeline-step completed">
            <div class="timeline-content">
              <div class="timeline-title">Processing Order</div>
              <div class="timeline-time">Dec 15, 11:45 AM</div>
              <div class="timeline-description">We're preparing your items for shipment</div>
              <div class="timeline-location">
                üìç Warehouse #3, Cape Town
              </div>
            </div>
          </div>

          <div class="timeline-step completed">
            <div class="timeline-content">
              <div class="timeline-title">Shipped</div>
              <div class="timeline-time">Dec 16, 9:15 AM</div>
              <div class="timeline-description">Your order has been handed to delivery partner</div>
              <div class="timeline-location">
                üìç FedEx Distribution Center
              </div>
            </div>
          </div>

          <div class="timeline-step current">
            <div class="timeline-content">
              <div class="timeline-title">Out for Delivery</div>
              <div class="timeline-time">Today, 10:00 AM</div>
              <div class="timeline-description">Your order is on its way to your address</div>
              <div class="timeline-location">
                üìç Driver: John D. ‚Ä¢ Vehicle: VAN-789
              </div>
            </div>
          </div>

          <div class="timeline-step">
            <div class="timeline-content">
              <div class="timeline-title">Delivered</div>
              <div class="timeline-time">Expected: Today, 2:00 PM</div>
              <div class="timeline-description">Your order will be delivered to your doorstep</div>
            </div>
          </div>
        </div>

        <!-- Delivery Info -->
        <div class="delivery-info">
          <div class="info-row">
            <span class="info-label">Delivery Address:</span>
            <span class="info-value" id="deliveryAddress">123 Main Street, Cape Town, 8001</span>
          </div>
          <div class="info-row">
            <span class="info-label">Recipient:</span>
            <span class="info-value" id="deliveryRecipient">John Doe</span>
          </div>
          <div class="info-row">
            <span class="info-label">Contact:</span>
            <span class="info-value" id="deliveryContact">+27 12 345 6789</span>
          </div>
          <div class="info-row">
            <span class="info-label">Delivery Instructions:</span>
            <span class="info-value" id="deliveryInstructions">Leave at front door if no answer</span>
          </div>
        </div>

        <!-- Delivery Map Placeholder -->
        <div class="delivery-map">
          üìç Live Delivery Map Would Show Here
        </div>

        <!-- Tracking Actions -->
        <div class="tracking-actions">
          <button class="action-btn" onclick="shareTracking()">
            üì± Share Status
          </button>
          <button class="action-btn" onclick="contactDriver()">
            üìû Contact Driver
          </button>
          <button class="action-btn" onclick="downloadProof()">
            üìÑ Download Proof
          </button>
        </div>
      </div>

      <!-- Empty State -->
      <div class="empty-state" id="noTracking" style="display: none;">
        <div class="empty-icon">üì¶</div>
        <h3 class="empty-title">No Active Tracking</h3>
        <p class="empty-description">Enter your order details above to start tracking</p>
        <button class="lookup-btn" onclick="focusOrderInput()" style="max-width: 200px;">
          Enter Order Number
        </button>
      </div>
    </div>

    <!-- Recent Orders -->
    <div class="recent-orders">
      <h2 class="recent-title">Recent Orders</h2>
      <div class="orders-list" id="recentOrders">
        <!-- Orders will be populated by JavaScript -->
      </div>
      
      <div class="empty-state" id="noRecentOrders" style="display: none; padding: 20px;">
        <div class="empty-icon">üìã</div>
        <h3 class="empty-title">No Recent Orders</h3>
        <p class="empty-description">Your order history will appear here</p>
        <button class="action-btn" onclick="window.location.href='index.html'" style="margin-top: 16px; width: 100%;">
          üõçÔ∏è Start Shopping
        </button>
      </div>
    </div>
  </div>
</main>

<footer>
  <div class="footer-content">
    <div>
      <h4>Company</h4>
      <a class="footer-link" href="about.html">About Us</a>
      <a class="footer-link" href="terms.html">Terms & Conditions</a>
      <a class="footer-link" href="privacy.html">Privacy Policy</a>
      <a class="footer-link" href="cookies.html">Cookie Policy</a>
    </div>
    <div>
      <h4>Support</h4>
      <a class="footer-link" href="help.html">Help Center</a>
      <a class="footer-link" href="contact.html">Contact Us</a>
      <a class="footer-link" href="shipping.html">Shipping Policy</a>
      <a class="footer-link" href="returns.html">Returns & Refunds</a>
    </div>
    <div>
      <h4>Account</h4>
      <a class="footer-link" href="#">My Account</a>
      <a class="footer-link" href="orderhistory.html">Order History</a>
      <a class="footer-link" href="index.html">Wishlist</a>
      <a class="footer-link" href="#">Newsletter</a>
    </div>
    <div>
      <h4>Quick Links</h4>
      <a class="footer-link" href="tracking.html">Track Order</a>
      <a class="footer-link" href="orderhistory.html">Order History</a>
      <a class="footer-link" href="index.html">Shop Products</a>
      <a class="footer-link" href="contact.html">Customer Support</a>
    </div>
  </div>

  <div class="copyright">
    ¬© 2026 All rights reserved. Shoprite Holdings
  </div>
</footer>

<script>
  // Initialize page
  document.addEventListener('DOMContentLoaded', () => {
    loadCartCount();
    loadRecentOrders();
    
    // Check if there's an order in localStorage to auto-track
    const lastOrder = JSON.parse(localStorage.getItem('lastOrder'));
    if (lastOrder) {
      document.getElementById('orderNumber').value = lastOrder.orderNumber;
      document.getElementById('email').value = lastOrder.customer.email || '';
      trackOrderFromData(lastOrder);
    } else {
      showEmptyState();
    }
  });

  // Load cart count
  function loadCartCount() {
    const cart = JSON.parse(localStorage.getItem('cart')) || [];
    const totalItems = cart.reduce((sum, item) => sum + item.quantity, 0);
    document.getElementById('cartItems').textContent = totalItems;
  }

  // Load recent orders
  function loadRecentOrders() {
    const orderHistory = JSON.parse(localStorage.getItem('orderHistory')) || [];
    const recentOrders = document.getElementById('recentOrders');
    const emptyState = document.getElementById('noRecentOrders');
    
    if (orderHistory.length === 0) {
      emptyState.style.display = 'block';
      recentOrders.innerHTML = '';
      return;
    }
    
    emptyState.style.display = 'none';
    
    recentOrders.innerHTML = orderHistory.slice(0, 5).map(order => `
      <div class="order-card" onclick="trackOrderById('${order.id}')">
        <div class="order-icon">üì¶</div>
        <div class="order-details">
          <div class="order-number">#${order.id}</div>
          <div class="order-date">${formatDate(order.date)}</div>
          <div class="order-status-small ${getStatusClass(order.status)}">
            ${order.status}
          </div>
        </div>
        <div style="color: #16a34a; font-weight: 600; font-size: 14px;">
          R${order.summary.total.toFixed(2)}
        </div>
      </div>
    `).join('');
  }

  // Format date
  function formatDate(dateString) {
    const date = new Date(dateString);
    return date.toLocaleDateString('en-ZA', {
      month: 'short',
      day: 'numeric',
      year: 'numeric'
    });
  }

  // Get status class
  function getStatusClass(status) {
    const statusMap = {
      'Delivered': 'status-delivered',
      'Shipped': 'status-shipping',
      'Processing': 'status-processing',
      'Confirmed': 'status-processing',
      'Out for Delivery': 'status-shipping'
    };
    return statusMap[status] || 'status-processing';
  }

  // Track order by ID
  function trackOrderById(orderId) {
    const orderHistory = JSON.parse(localStorage.getItem('orderHistory')) || [];
    const order = orderHistory.find(o => o.id === orderId);
    
    if (order) {
      document.getElementById('orderNumber').value = orderId;
      document.getElementById('email').value = order.customer.email || '';
      trackOrderFromData(order);
    } else {
      showNotification('Order not found in history');
    }
  }

  // Track order form submission
  function trackOrder(event) {
    event.preventDefault();
    
    const orderNumber = document.getElementById('orderNumber').value.trim();
    const email = document.getElementById('email').value.trim();
    
    if (!orderNumber || !email) {
      showNotification('Please enter both order number and email');
      return;
    }
    
    // Look for order in history
    const orderHistory = JSON.parse(localStorage.getItem('orderHistory')) || [];
    const order = orderHistory.find(o => o.id === orderNumber);
    
    if (order) {
      if (order.customer.email && order.customer.email !== email) {
        showNotification('Email does not match order records');
        return;
      }
      
      trackOrderFromData(order);
      showNotification('Order found! Loading tracking information...');
    } else {
      // Simulate finding order from server
      simulateTracking(orderNumber, email);
    }
  }

  // Track order from data
  function trackOrderFromData(order) {
    const trackingData = generateTrackingData(order);
    
    // Update tracking display
    document.getElementById('trackingOrderNumber').textContent = order.id;
    document.getElementById('trackingDelivery').textContent = getEstimatedDelivery();
    document.getElementById('trackingUpdated').textContent = 'Just now';
    document.getElementById('deliveryAddress').textContent = order.customer.address;
    document.getElementById('deliveryRecipient').textContent = `${order.customer.firstName} ${order.customer.lastName}`;
    document.getElementById('deliveryContact').textContent = order.customer.phone;
    document.getElementById('deliveryInstructions').textContent = 'Leave at front door if no answer';
    
    // Show tracking section
    document.getElementById('activeTracking').style.display = 'block';
    document.getElementById('noTracking').style.display = 'none';
    
    // Scroll to tracking
    document.getElementById('activeTracking').scrollIntoView({ behavior: 'smooth' });
  }

  // Simulate tracking (for demo)
  function simulateTracking(orderNumber, email) {
    const mockOrder = {
      id: orderNumber,
      date: new Date().toISOString(),
      customer: {
        firstName: 'John',
        lastName: 'Doe',
        address: '123 Main Street, Cape Town, 8001',
        phone: '+27 12 345 6789',
        email: email
      },
      summary: {
        total: 1626.30
      },
      status: 'Out for Delivery'
    };
    
    // Show loading
    const btn = event.submitter;
    const originalText = btn.textContent;
    btn.textContent = 'Tracking...';
    btn.disabled = true;
    
    setTimeout(() => {
      trackOrderFromData(mockOrder);
      showNotification('Order found! Loading tracking information...');
      
      btn.textContent = originalText;
      btn.disabled = false;
    }, 1500);
  }

  // Generate tracking data
  function generateTrackingData(order) {
    const statuses = [
      { status: 'Order Confirmed', time: 'Dec 15, 10:30 AM', completed: true },
      { status: 'Processing Order', time: 'Dec 15, 11:45 AM', completed: true },
      { status: 'Shipped', time: 'Dec 16, 9:15 AM', completed: true },
      { status: 'Out for Delivery', time: 'Today, 10:00 AM', current: true },
      { status: 'Delivered', time: 'Expected: Today, 2:00 PM' }
    ];
    
    return {
      statuses: statuses,
      delivery: {
        address: order.customer.address,
        recipient: `${order.customer.firstName} ${order.customer.lastName}`,
        contact: order.customer.phone
      }
    };
  }

  // Get estimated delivery
  function getEstimatedDelivery() {
    const now = new Date();
    const today = now.getDate();
    const month = now.toLocaleString('default', { month: 'long' });
    const hour = now.getHours();
    
    // Simulate delivery window
    const startHour = (hour + 2) % 24;
    const endHour = (hour + 4) % 24;
    
    return `Today, ${startHour}:00 - ${endHour}:00`;
  }

  // Show empty state
  function showEmptyState() {
    document.getElementById('activeTracking').style.display = 'none';
    document.getElementById('noTracking').style.display = 'block';
  }

  // Focus order input
  function focusOrderInput() {
    document.getElementById('orderNumber').focus();
  }

  // Share tracking
  function shareTracking() {
    const orderNumber = document.getElementById('trackingOrderNumber').textContent;
    const status = 'Out for Delivery';
    const url = window.location.href;
    
    const shareText = `Track my WeShopOnline order #${orderNumber}. Current status: ${status}. ${url}`;
    
    if (navigator.share) {
      navigator.share({
        title: `Track Order #${orderNumber}`,
        text: shareText,
        url: url
      });
    } else {
      navigator.clipboard.writeText(shareText);
      showNotification('Tracking link copied to clipboard!');
    }
  }

  // Contact driver
  function contactDriver() {
    alert('In a real implementation, this would:\n1. Show driver contact details\n2. Allow SMS/call\n3. Show driver location\n\nFor demo: Driver John D. +27 83 123 4567');
  }

  // Download proof
  function downloadProof() {
    const orderNumber = document.getElementById('trackingOrderNumber').textContent;
    showNotification(`Downloading delivery proof for ${orderNumber}...`);
    
    // Simulate download
    setTimeout(() => {
      showNotification('Delivery proof downloaded successfully!');
    }, 1000);
  }

  // Show notification
  function showNotification(message) {
    const notification = document.createElement('div');
    notification.className = 'notification';
    notification.textContent = message;
    
    document.body.appendChild(notification);
    
    setTimeout(() => {
      notification.style.animation = 'slideOut 0.3s ease';
      setTimeout(() => notification.remove(), 300);
    }, 3000);
  }
</script>

</body>
</html>